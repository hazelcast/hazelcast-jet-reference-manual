buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.6'
        classpath 'org.asciidoctor:asciidoctorj-pdf:1.5.0-alpha.16'
        classpath 'org.asciidoctor:asciidoctorj-epub3:1.5.0-alpha.8.1'
    }
}

apply plugin: 'org.asciidoctor.convert'

asciidoctor {
    requires file('./multipage-html5-converter.rb')
    sourceDir "src"
    outputDir "target"
    sources {
      include 'book.adoc'
    }
    backends = [ 'html5', 'pdf', 'multipage_html5', 'epub3' ]
    options = [
        logDocuments: true,
        doctype: 'book',
        icons: 'font',
    ]
    attributes = [
        'source-highlighter': 'coderay',
        //experimental: true,
        //'source-highlighter': 'highlightjs',
        //'highlightjs-theme' : 'tomorrow',
        toc                 : 'left',
        idprefix            : '',
        idseparator         : '-',
        imagesdir	    : './images',
        sectanchors         : true,
        sectlinks           : true,
//        stylesheet	    : './asciidoctor-stylesheet-factory/stylesheets/foundation.css',
    ]
}

build {
   dependsOn asciidoctor
}

clean {
    delete asciidoctor.outputDir
}
